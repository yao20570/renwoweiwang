-----------------------------------------------------
-- author: wangxs
-- updatetime:  2017-07-26 21:41:19 星期三
-- Description: 武将半身像，全身像管理类
-----------------------------------------------------
tHeroViewTexture = {} --全身像纹理集合

tHeroViewTexture["i200001_"] = "hero/p1_hero_view1"
tHeroViewTexture["i200011_"] = "hero/p1_hero_view1"
tHeroViewTexture["i200021_"] = "hero/p1_hero_view1"
tHeroViewTexture["i200031_"] = "hero/p1_hero_view1"

tHeroViewTexture["i200041_"] = "hero/p1_hero_view2"
tHeroViewTexture["i200051_"] = "hero/p1_hero_view2"
tHeroViewTexture["i200061_"] = "hero/p1_hero_view2"
tHeroViewTexture["i200071_"] = "hero/p1_hero_view2"

tHeroViewTexture["i200101_"] = "hero/p1_hero_view3"
tHeroViewTexture["i200111_"] = "hero/p1_hero_view3"
tHeroViewTexture["i200121_"] = "hero/p1_hero_view3"
tHeroViewTexture["i200131_"] = "hero/p1_hero_view3"

tHeroViewTexture["i200141_"] = "hero/p1_hero_view4"
tHeroViewTexture["i200151_"] = "hero/p1_hero_view4"
tHeroViewTexture["i200231_"] = "hero/p1_hero_view4"
tHeroViewTexture["i200251_"] = "hero/p1_hero_view4"

tHeroViewTexture["i200271_"] = "hero/p1_hero_view5"
tHeroViewTexture["i200281_"] = "hero/p1_hero_view5"
tHeroViewTexture["i200291_"] = "hero/p1_hero_view5"
tHeroViewTexture["i200311_"] = "hero/p1_hero_view17"

tHeroViewTexture["i200321_"] = "hero/p1_hero_view6"
tHeroViewTexture["i200331_"] = "hero/p1_hero_view6"
tHeroViewTexture["i200341_"] = "hero/p1_hero_view6"
tHeroViewTexture["i200351_"] = "hero/p1_hero_view6"

tHeroViewTexture["i200361_"] = "hero/p1_hero_view7"
tHeroViewTexture["i200371_"] = "hero/p1_hero_view7"
tHeroViewTexture["i200381_"] = "hero/p1_hero_view7"
tHeroViewTexture["i200491_"] = "hero/p1_hero_view7"

tHeroViewTexture["i200511_"] = "hero/p1_hero_view8"
tHeroViewTexture["i200531_"] = "hero/p1_hero_view8"
tHeroViewTexture["i200621_"] = "hero/p1_hero_view8"
tHeroViewTexture["v1_img_role_"] = "hero/p1_hero_view8"

tHeroViewTexture["i200451_"] = "hero/p1_hero_view9"
tHeroViewTexture["i200461_"] = "hero/p1_hero_view9"
tHeroViewTexture["i200471_"] = "hero/p1_hero_view9"
tHeroViewTexture["i200481_"] = "hero/p1_hero_view9"

tHeroViewTexture["i200551_"] = "hero/p1_hero_view10"
tHeroViewTexture["i200191_"] = "hero/p1_hero_view10"
tHeroViewTexture["i200201_"] = "hero/p1_hero_view10"
tHeroViewTexture["i200401_"] = "hero/p1_hero_view10"

tHeroViewTexture["i200411_"] = "hero/p1_hero_view11"
tHeroViewTexture["i200561_"] = "hero/p1_hero_view11"
tHeroViewTexture["i200421_"] = "hero/p1_hero_view11"
tHeroViewTexture["i200441_"] = "hero/p1_hero_view11"

tHeroViewTexture["i200431_"] = "hero/p1_hero_view12"
tHeroViewTexture["i200301_"] = "hero/p1_hero_view12"
tHeroViewTexture["i200501_"] = "hero/p1_hero_view12"
tHeroViewTexture["i200521_"] = "hero/p1_hero_view12"

tHeroViewTexture["i200591_"] = "hero/p1_hero_view13"
tHeroViewTexture["i200541_"] = "hero/p1_hero_view13"
tHeroViewTexture["i200571_"] = "hero/p1_hero_view13"
tHeroViewTexture["i200601_"] = "hero/p1_hero_view13"

tHeroViewTexture["i200611_"] = "hero/p1_hero_view14"
tHeroViewTexture["i200391_"] = "hero/p1_hero_view14"
tHeroViewTexture["i200581_"] = "hero/p1_hero_view14"
tHeroViewTexture["i200631_"] = "hero/p1_hero_view14"

tHeroViewTexture["i200641_"] = "hero/p1_hero_view15"
tHeroViewTexture["i200651_"] = "hero/p1_hero_view15"
tHeroViewTexture["i200261_"] = "hero/p1_hero_view15"

tHeroViewTexture["i200221_"] = "hero/p1_hero_view16"
tHeroViewTexture["i200211_"] = "hero/p1_hero_view16"
tHeroViewTexture["i200181_"] = "hero/p1_hero_view16"
tHeroViewTexture["i200171_"] = "hero/p1_hero_view16"

tHeroViewTexture["i200241_"] = "hero/p1_hero_view17"

tHeroHalfTexture = {} --半身像纹理集合

tHeroHalfTexture["i200001_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200011_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200021_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200031_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200041_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200051_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200061_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200071_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200101_"] = "hero/p1_hero_half1"
tHeroHalfTexture["i200111_"] = "hero/p1_hero_half1"

tHeroHalfTexture["i200121_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200131_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200141_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200151_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200231_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200251_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200271_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200281_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200291_"] = "hero/p1_hero_half2"
tHeroHalfTexture["i200311_"] = "hero/p1_hero_half2"

tHeroHalfTexture["i200321_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200331_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200341_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200351_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200361_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200371_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200381_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200491_"] = "hero/p1_hero_half3"
tHeroHalfTexture["i200511_"] = "hero/p1_hero_half3"

tHeroHalfTexture["i200531_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200621_"] = "hero/p1_hero_half4"
tHeroHalfTexture["v1_img_role_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200451_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200461_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200471_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200481_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200551_"] = "hero/p1_hero_half4"
tHeroHalfTexture["i200191_"] = "hero/p1_hero_half4"

tHeroHalfTexture["i200201_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200401_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200411_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200561_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200421_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200441_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200431_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200301_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200501_"] = "hero/p1_hero_half5"
tHeroHalfTexture["i200521_"] = "hero/p1_hero_half5"

tHeroHalfTexture["i200591_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200541_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200571_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200601_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200611_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200391_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200581_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200631_"] = "hero/p1_hero_half6"
tHeroHalfTexture["i200641_"] = "hero/p1_hero_half6"

tHeroHalfTexture["i200651_"] = "hero/p1_hero_half7"
tHeroHalfTexture["i200261_"] = "hero/p1_hero_half7"
tHeroHalfTexture["i200221_"] = "hero/p1_hero_half7"
tHeroHalfTexture["i200211_"] = "hero/p1_hero_half7"
tHeroHalfTexture["i200181_"] = "hero/p1_hero_half7"
tHeroHalfTexture["i200171_"] = "hero/p1_hero_half7"
tHeroHalfTexture["i200241_"] = "hero/p1_hero_half7"

--特殊按钮类型
TypeHeroDiy = {
    I             =       1,          --类型1（250*400）
    II            =       2,          --类型2

}

function getHeroBodyImagePath(_sHeroImgKey, _nIndex)
    return string.format("hero/%s%s.jpg", _sHeroImgKey, _nIndex)
end

function getHeroHeadImagePath(_sHeroImgKey)
    return string.format("#%s5.png", _sHeroImgKey)
end

--创建英雄形象 _img 英雄外显标志 _type (默认1全身像,2为半身像)
function creatHeroView(_img, _type)
  -- _img = "i200611_"
  local nType = _type or 1
  local pHeroView = nil
  if nType == 1 then
    local HeroView = require("app.common.heroview.HeroView")
    pHeroView =  HeroView.new(_img)
  elseif nType == 2 then
    local HeroViewHalf = require("app.common.heroview.HeroViewHalf")
    pHeroView =  HeroViewHalf.new(_img)
  end
  return pHeroView
end

--创建英雄形象 DIY
--_img：武将图片外显名字
--_tSPos：起始点坐标
--_fScale：对应类型截取的比例大小
--_nHType：全身像大小类型
function creatHeroDIYView(_img, _tSPos, _fScale, _nHType)
  local HeroViewDiy = require("app.common.heroview.HeroViewDiy")
  return HeroViewDiy.new(_img, _tSPos, _fScale, _nHType)
end

--使用中的纹理
tCurUseTextures = {}

--_nHType：全身像大小类型(1:全身， 2:半身)
function addHeroTextureToCache(_sHeroImageKey, _nHType)
    local sImageName = nil 
    if _nHType == 1 then 
        sImageName = tHeroViewTexture[_sHeroImageKey]
    elseif _nHType == 2 then
        sImageName = tHeroHalfTexture[_sHeroImageKey]
    end
	if sImageName then 
		addTextureToCache(sImageName, 3)
        tCurUseTextures[sImageName] = sImageName
    end
end

--移除武将纹理
function removeHeroUnuserPvr()
  -- body
--  if tCurUseTextures and table.nums(tCurUseTextures) > 0 then
--    local nSize = table.nums(tCurUseTextures)
--    local tKeys = table.keys(tCurUseTextures)
--    for i = nSize, 1, -1 do
--      if tKeys[i] and tCurUseTextures[tKeys[i]] then
--        tCurUseTextures[tKeys[i]] = tCurUseTextures[tKeys[i]] - 1
--        if tCurUseTextures[tKeys[i]] == 0 then
--          removeTextureFromCache(tKeys[i],3)
--          tCurUseTextures[tKeys[i]] = nil
--        end
--      end
--    end
--  end
    for k, v in pairs(tCurUseTextures) do
        removeTextureFromCache(v, 3)
    end
    tCurUseTextures = {}
end

